---
- name: create /var/log/condor-launcher
  file: path=/var/log/condor-launcher owner=root group=root mode=0755 state=directory

- name: Add jobservices.yml
  ansible.builtin.template:
    src: jobservices.yml.j2
    dest: /etc/jobservices.yml
    owner: root
    group: root
    mode: "0644"

- name: download condor-launcher release
  get_url:
    url: "https://github.com/cyverse-de/condor-launcher/releases/download/v2.21.0/condor-launcher"
    dest: "/usr/local/bin/condor-launcher"
    owner: root
    group: root
    mode: "0755"

# - name: pull condor-launcher image
#   shell: docker pull discoenv/condor-launcher:{{docker.tag}}

# - name: install condor-launcher
#   shell: docker run --rm -v /usr/local/bin:/condor-launcher --entrypoint "cp" discoenv/condor-launcher:{{docker.tag}} /go/bin/condor-launcher /condor-launcher/condor-launcher

- include: systemd.yml
